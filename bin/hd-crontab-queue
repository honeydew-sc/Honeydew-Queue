#! /usr/bin/perl

# PODNAME: hd-crontab-queue - append Honeydew::Queue business to your crontab
use strict;
use warnings;
use feature qw/say/;
use Honeydew::ExternalServices::Crontab qw/add_crontab_section/;

=head1 SYNOPSIS

    $ hd-crontab-queue

=head1 DESCRIPTION

Prints to STDOUT your current crontab with the L<Honeydew::Queue>
section appended to the end of it.

=cut

my $crontab = [
    '# clear the nightly queues before we start the nightlies',
    '0 20 * * * source ~/.bashrc; hd-reset-nightlies'
];

say $_ for @{ add_crontab_section( 'queue', $crontab ) };
